digraph "Genomon Pipeline Schemes DNA"
{
	size = "11";
	splines = true;
	fontsize = "30";
	ranksep = 0.3;
	node[fontname = "helvetica", fontsize="12"];
	graph[clusterrank = "local"];
	
	subgraph clustertasks
	{
		rank="min";
		fontname = "helvetica";
		fontcolor = "#FF3232";
		fontsize = "18";
		label = "Genomon Pipeline Schemes DNA";

		#### task
		# input
		tsk_input_bam2fastq   [color="#006000", fillcolor="#B8CC6E", fontcolor="#006000", shape=box3d, style=filled, label="[bam_tofastq]"];
		tsk_input_fastq       [color="#006000", fillcolor="#B8CC6E", fontcolor="#006000", shape=box3d, style=filled, label="[fastq]"];
		tsk_input_bamimport   [color="#006000", fillcolor="#B8CC6E", fontcolor="#006000", shape=box3d, style=filled, label="[bam_import]"];

		# stage
		tsk_bam2fastq         [color="#0044A0", fillcolor="#EBF3FF", fontcolor="#0044A0", shape=box3d, style=filled, label="bam2fastq"];
		tsk_link_import_bam   [color="#0044A0", fillcolor="#EBF3FF", fontcolor="#0044A0", shape=box3d, style=filled, label="link_import_bam"];
		tsk_link_input_fastq  [color="#0044A0", fillcolor="#EBF3FF", fontcolor="#0044A0", shape=box3d, style=filled, label="link_input_fastq"];
		tsk_split_files       [color="#0044A0", fillcolor="#EBF3FF", fontcolor="#0044A0", shape=box3d, style=filled, label="split_files"];
		tsk_map_dna_sequence  [color="#0044A0", fillcolor="#EBF3FF", fontcolor="#0044A0", shape=box3d, style=filled, label="map_dna_sequence"];
		tsk_markdup           [color="#0044A0", fillcolor="#EBF3FF", fontcolor="#0044A0", shape=box3d, style=filled, label="markdup"];

		# output
		out_bam               [color="#33220D", fillcolor="#F8CA31", fontcolor="#33220D", shape=box3d, style=filled, label="markdup.bam"];

		#### lines
		# input
		tsk_input_bam2fastq -> tsk_bam2fastq[color="#0044A0"];
		tsk_input_fastq -> tsk_link_input_fastq[color="#0044A0"];
		tsk_input_bamimport -> tsk_link_import_bam[color="#0044A0"];

		# stage
		tsk_bam2fastq -> tsk_split_files[color="#0044A0"];
		tsk_link_input_fastq -> tsk_split_files[color="#0044A0"];
		tsk_split_files -> tsk_map_dna_sequence[color="#0044A0"];
		tsk_map_dna_sequence -> tsk_markdup[color="#0044A0"];
		tsk_link_import_bam -> out_bam[color="#0044A0"];
		tsk_markdup -> out_bam[color="#0044A0"];
		out_bam -> tsk_q_bam_stats[color="#0044A0"];
		out_bam -> tsk_q_coverage[color="#0044A0"];
		out_bam -> tsk_m_identify[color="#0044A0"];
		out_bam -> tsk_s_parse[color="#0044A0"];

		subgraph clustertasks_mutation
		{
			rank="min";
			fontname = "helvetica";
			fontcolor = "#0044A0";
			fontsize = "18";
			label = " [mutation_call]";
			style = dashed;

			#### task
			tsk_m_identify     [color="#0044A0", fillcolor="#EBF3FF", fontcolor="#0044A0", shape=box3d, style=filled, label="identify_mutations"];
			tsk_m_pa           [color="#0044A0", fillcolor="#EBF3FF", fontcolor="#0044A0", shape=box3d, style=filled, label="post_analysis_mutation"];
			tsk_m_paplot       [color="#0044A0", fillcolor="#EBF3FF", fontcolor="#0044A0", shape=box3d, style=filled, label="paplot"];
			tsk_m_signature    [color="#0044A0", fillcolor="#EBF3FF", fontcolor="#0044A0", shape=box3d, style=filled, label="pmsignature"];
			
			# output
			out_m_result       [color="#33220D", fillcolor="#F8CA31", fontcolor="#33220D", shape=box3d, style=filled, label="genomon_mutation.result.txt"];
			out_m_pa_igv       [color="#33220D", fillcolor="#EFA03B", fontcolor="#33220D", shape=box3d, style=filled, label="capture.IGV"];
			out_m_pa_merge     [color="#33220D", fillcolor="#EFA03B", fontcolor="#33220D", shape=box3d, style=filled, label="merge.result"];
			out_m_signature    [color="#33220D", fillcolor="#F8CA31", fontcolor="#33220D", shape=box3d, style=filled, label="pmsignature.result.json"];
			out_m_paplot       [color="#33220D", fillcolor="#EFA03B", fontcolor="#33220D", shape=box3d, style=filled, label="plot"];

			#### link
			# output
			tsk_m_identify -> out_m_result[color="#0044A0"];

			# postm_analysis
			out_m_result -> tsk_m_pa[color="#0044A0"];
			tsk_m_pa -> out_m_pa_merge[color="#0044A0"];
			tsk_m_pa -> out_m_pa_igv[color="#0044A0"];

			# signature
			out_m_pa_merge -> tsk_m_signature[color="#0044A0"];
			tsk_m_signature -> out_m_signature[color="#0044A0"];
			
			# paplot
			out_m_pa_merge -> tsk_m_paplot[color="#0044A0"];
			out_m_signature -> tsk_m_paplot[color="#0044A0"];
			tsk_m_paplot -> out_m_paplot[color="#0044A0"];
		}
		subgraph clustertasks_sv
		{
			rank="min";
			fontname = "helvetica";
			fontcolor = "#0044A0";
			fontsize = "18";
			label = "[sv_detection]";
			style = dashed;

			#### task
			tsk_s_parse         [color="#0044A0", fillcolor="#EBF3FF", fontcolor="#0044A0", shape=box3d, style=filled, label="parse_sv"];
			tsk_s_merge         [color="#0044A0", fillcolor="#EBF3FF", fontcolor="#0044A0", shape=box3d, style=filled, label="merge_sv"];
			tsk_s_filt          [color="#0044A0", fillcolor="#EBF3FF", fontcolor="#0044A0", shape=box3d, style=filled, label="filt_sv"];
			tsk_s_pa            [color="#0044A0", fillcolor="#EBF3FF", fontcolor="#0044A0", shape=box3d, style=filled, label="post_analysis_sv"];
			tsk_s_paplot        [color="#0044A0", fillcolor="#EBF3FF", fontcolor="#0044A0", shape=box3d, style=filled, label="paplot"];

			# output
			out_s_result        [color="#33220D", fillcolor="#F8CA31", fontcolor="#33220D", shape=box3d, style=filled, label="genomonSV.result.txt"];
			out_s_pa_sv_igv     [color="#33220D", fillcolor="#EFA03B", fontcolor="#33220D", shape=box3d, style=filled, label="capture.IGV"];
			out_s_pa_sv_merge   [color="#33220D", fillcolor="#EFA03B", fontcolor="#33220D", shape=box3d, style=filled, label="merge.result"];
			out_s_paplot        [color="#33220D", fillcolor="#EFA03B", fontcolor="#33220D", shape=box3d, style=filled, label="plot"];

			#### link
			# stage
			tsk_s_parse -> tsk_s_merge[color="#0044A0"];
			tsk_s_merge -> tsk_s_filt[color="#0044A0"];

			# output
			tsk_s_filt -> out_s_result[color="#0044A0"];

			# post_analysis
			out_s_result -> tsk_s_pa[color="#0044A0"];
			tsk_s_pa -> out_s_pa_sv_merge[color="#0044A0"];
			tsk_s_pa -> out_s_pa_sv_igv[color="#0044A0"];

			# paplot
			out_s_pa_sv_merge -> tsk_s_paplot[color="#0044A0"];
			tsk_s_paplot -> out_s_paplot[color="#0044A0"];
		}
		subgraph clustertasks_qc
		{
			rank="min";
			fontname = "helvetica";
			fontcolor = "#0044A0";
			fontsize = "18";
			label = "[qc]";
			style = dashed;

			#### task
			tsk_q_bam_stats     [color="#0044A0", fillcolor="#EBF3FF", fontcolor="#0044A0", shape=box3d, style=filled, label="bam_stats"];
			tsk_q_coverage      [color="#0044A0", fillcolor="#EBF3FF", fontcolor="#0044A0", shape=box3d, style=filled, label="coverage"];
			tsk_q_merge         [color="#0044A0", fillcolor="#EBF3FF", fontcolor="#0044A0", shape=box3d, style=filled, label="merge_qc"];
			tsk_q_pa            [color="#0044A0", fillcolor="#EBF3FF", fontcolor="#0044A0", shape=box3d, style=filled, label="post_analysis_qc"];
			tsk_q_paplot        [color="#0044A0", fillcolor="#EBF3FF", fontcolor="#0044A0", shape=box3d, style=filled, label="paplot"];

			# output
			out_q_result        [color="#33220D", fillcolor="#F8CA31", fontcolor="#33220D", shape=box3d, style=filled, label="genomonQC.result.txt"];
			out_q_pa_merge      [color="#33220D", fillcolor="#EFA03B", fontcolor="#33220D", shape=box3d, style=filled, label="merge.result"];
			out_q_paplot        [color="#33220D", fillcolor="#EFA03B", fontcolor="#33220D", shape=box3d, style=filled, label="plot"];

			#### link
			# stage
			tsk_q_bam_stats -> tsk_q_merge[color="#0044A0"];
			tsk_q_coverage -> tsk_q_merge[color="#0044A0"];

			# output
			tsk_q_merge -> out_q_result[color="#0044A0"];

			# post_analysis
			out_q_result -> tsk_q_pa[color="#0044A0"];
			tsk_q_pa -> out_q_pa_merge[color="#0044A0"];

			# paplot
			out_q_pa_merge -> tsk_q_paplot[color="#0044A0"];
			tsk_q_paplot -> out_q_paplot[color="#0044A0"];
		}
	}

	subgraph clusterkey1
	{
		rank = "min";
		style  = filled;
		
		fontname = "helvetica"
		fontsize = 16;
		color = "#F6F4F4";
		label = "Key:"

		node[margin="0.2,0.2", fontname = "helvetica", fontsize="10"];
		k1[color="#006000", fillcolor="#B8CC6E", fontcolor="#006000", label="Input", shape=box3d, style=filled];
		k2[color="#0044A0", fillcolor="#EBF3FF", fontcolor="#0044A0", label="Task to run", shape=box3d, style=filled];
		k3[color="#33220D", fillcolor="#F8CA31", fontcolor="#33220D", label="Output", shape=box3d, style=filled];
		k4[color="#0044A0", fillcolor="#EBF3FF", fontcolor="#0044A0", label="Task to run", shape=box3d, style=filled];
		k5[color="#33220D", fillcolor="#EFA03B", fontcolor="#33220D", label="Post Analysis Output", shape=box3d, style=filled];
		k1 -> k2[color="#0044A0", arrowtype=normal];
		k2 -> k3[color="#0044A0", arrowtype=normal];
		k3 -> k4[color="#0044A0", arrowtype=normal];
		k4 -> k5[color="#0044A0", arrowtype=normal];
	}
}
